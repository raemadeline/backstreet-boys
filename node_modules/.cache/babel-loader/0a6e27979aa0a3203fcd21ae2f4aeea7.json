{"ast":null,"code":"import _classCallCheck from\"/Users/raemadeline/backstreet-boys/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/raemadeline/backstreet-boys/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/raemadeline/backstreet-boys/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/raemadeline/backstreet-boys/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/raemadeline/backstreet-boys/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./App.css';import $ from'jquery';import play from\"./media-play.svg\";import pause from\"./media-pause.svg\";import stepBackwards from\"./media-step-backward.svg\";import stepForwards from\"./media-step-forward.svg\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={tracks:[],currentIndex:0,playing:false};_this.previousTrack=function(){_this.setState({currentIndex:_this.state.currentIndex-1});};_this.nextTrack=function(){_this.setState({currentIndex:_this.state.currentIndex+1});};_this.skipToTrack=function(index){_this.setState({currentIndex:index});};_this.togglePlayPause=function(){_this.setState({playing:!_this.state.playing});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;$.ajax({type:\"GET\",url:\"https://s3-us-west-2.amazonaws.com/anchor-website/challenges/bsb.json\",dataType:\"JSON\"}).done(function(data){_this2.setState({tracks:data.tracks});});$(document).bind('keydown',function(e){//space bar\nif(e.which===32){e.preventDefault();_this2.togglePlayPause();}//right arrow\nif(e.which===39){_this2.nextTrack();}//left arrow\nif(e.which===37){_this2.previousTrack();}});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this3=this;var player=document.getElementById(\"media-player\");// initial data fetch, load first song and set eventlistener for end\nif(this.state.tracks.length>0&&prevState.tracks.length===0){player.load();player.addEventListener('ended',function(){_this3.nextTrack();});}// track changes (next, back, jump to song)\nif(this.state.currentIndex!==prevState.currentIndex){player.load();player.addEventListener('ended',function(){_this3.nextTrack();});if(this.state.playing){document.getElementById(\"media-player\").play();}}// play\nif(this.state.playing&&!prevState.playing){player.play();}// pause\nif(prevState.playing&&!this.state.playing){player.pause();}}},{key:\"renderTrack\",value:function renderTrack(track,i){var _this4=this;var imageUrl=track.imageUrl,title=track.title;return React.createElement(\"li\",{key:i,onClick:function onClick(){return _this4.skipToTrack(i);}},React.createElement(\"label\",null,title),React.createElement(\"img\",{src:imageUrl,alt:title}));}},{key:\"renderTrackList\",value:function renderTrackList(){var _this5=this;return React.createElement(\"ul\",{className:\"track-list\"},this.state.tracks.map(function(track,i){return _this5.renderTrack(track,i);}));}},{key:\"renderControls\",value:function renderControls(){var nextDisabled=this.state.currentIndex===this.state.tracks.length-1;var previousDisabled=this.state.currentIndex===0;return React.createElement(\"div\",{className:\"controls\"},React.createElement(\"button\",{disabled:previousDisabled,onClick:this.previousTrack},React.createElement(\"img\",{src:stepBackwards,alt:\"Previous\"})),React.createElement(\"button\",{onClick:this.togglePlayPause},this.state.playing?React.createElement(\"img\",{src:pause,alt:\"Pause\"}):React.createElement(\"img\",{src:play,alt:\"Play\"})),React.createElement(\"button\",{disabled:nextDisabled,onClick:this.nextTrack},React.createElement(\"img\",{src:stepForwards,alt:\"Next\"})));}},{key:\"renderCurrentlyPlaying\",value:function renderCurrentlyPlaying(){var trackCount=this.state.tracks.length;// data hasn't loaded, or the index got out of bounds somehow\nif(trackCount<1||this.state.currentIndex>=trackCount){return null;}var currentTrack=this.state.tracks[this.state.currentIndex];var imageUrl=currentTrack.imageUrl,mediaUrl=currentTrack.mediaUrl,title=currentTrack.title;var media,image;if(mediaUrl.startsWith(\"https://audio-ssl.itunes.apple.com/\")){// audio\nmedia=React.createElement(\"audio\",{id:\"media-player\"},React.createElement(\"source\",{src:mediaUrl}),\"Your browser does not support the audio element.\");image=React.createElement(\"img\",{className:\"album-artwork\",src:imageUrl,alt:title});}else{// video\nmedia=React.createElement(\"video\",{id:\"media-player\"},React.createElement(\"source\",{src:mediaUrl}),\"Your browser does not support the video tag.\");image=null;}var splitTitle=title.split(\" by \");return React.createElement(\"div\",{className:\"player\"},media,image,React.createElement(\"label\",{className:\"song-title\"},splitTitle[0]),React.createElement(\"label\",{className:\"song-artist\"},splitTitle[1]),this.renderControls());}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"App\"},React.createElement(\"div\",{className:\"main\"},this.renderCurrentlyPlaying(),this.renderTrackList()));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/raemadeline/backstreet-boys/src/App.js"],"names":["React","$","App","state","tracks","currentIndex","playing","previousTrack","setState","nextTrack","skipToTrack","index","togglePlayPause","ajax","type","url","dataType","done","data","document","bind","e","which","preventDefault","prevProps","prevState","player","getElementById","length","load","addEventListener","play","pause","track","i","imageUrl","title","map","renderTrack","nextDisabled","previousDisabled","stepBackwards","stepForwards","trackCount","currentTrack","mediaUrl","media","image","startsWith","splitTitle","split","renderControls","renderCurrentlyPlaying","renderTrackList","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport $ from 'jquery';\nimport play from './media-play.svg';\nimport pause from './media-pause.svg';\nimport stepBackwards from './media-step-backward.svg';\nimport stepForwards from './media-step-forward.svg';\n\nclass App extends React.Component {\n  state = {\n    tracks: [],\n    currentIndex: 0,\n    playing: false\n  }\n\n  componentDidMount() {\n    $.ajax({\n      type: \"GET\",\n      url: \"https://s3-us-west-2.amazonaws.com/anchor-website/challenges/bsb.json\",\n      dataType: \"JSON\"\n    }).done((data) => {\n      this.setState({ tracks: data.tracks })\n    })\n\n    $(document).bind('keydown', (e) => {\n      //space bar\n      if (e.which === 32){\n        e.preventDefault();\n        this.togglePlayPause();\n      }\n      //right arrow\n      if (e.which === 39) {\n        this.nextTrack();\n      }\n      //left arrow\n      if (e.which === 37) {\n        this.previousTrack();\n      }\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const player = document.getElementById(\"media-player\")\n\n    // initial data fetch, load first song and set eventlistener for end\n    if (this.state.tracks.length > 0 && prevState.tracks.length === 0) {\n      player.load();\n      player.addEventListener('ended', () => { this.nextTrack() });\n    }\n\n    // track changes (next, back, jump to song)\n    if (this.state.currentIndex !== prevState.currentIndex) {\n      player.load();\n      player.addEventListener('ended', () => { this.nextTrack() });\n\n      if (this.state.playing) {\n        document.getElementById(\"media-player\").play();\n      }\n    }\n\n    // play\n    if (this.state.playing && !prevState.playing) {\n      player.play();\n    }\n\n    // pause\n    if (prevState.playing && !this.state.playing) {\n      player.pause();\n    }\n  }\n\n  previousTrack = () => {\n    this.setState({ currentIndex: this.state.currentIndex - 1 });\n  }\n\n  nextTrack = () => {\n    this.setState({ currentIndex: this.state.currentIndex + 1 });\n  }\n\n  skipToTrack = (index) => {\n    this.setState({ currentIndex: index });\n  }\n\n  togglePlayPause = () => {\n    this.setState({ playing: !this.state.playing });\n  }\n\n  renderTrack(track, i) {\n    const { imageUrl, title} = track;\n\n    return <li key={i} onClick={() => this.skipToTrack(i)}>\n      <label>{title}</label>\n      <img src={imageUrl} alt={title}/>\n    </li>\n  }\n\n  renderTrackList() {\n    return <ul className=\"track-list\">\n      {this.state.tracks.map((track, i) => {\n        return this.renderTrack(track, i);\n      })}\n    </ul>\n  }\n\n  renderControls() {\n    const nextDisabled = this.state.currentIndex === this.state.tracks.length - 1;\n    const previousDisabled = this.state.currentIndex === 0;\n\n    return <div className=\"controls\">\n      <button\n        disabled={previousDisabled}\n        onClick={this.previousTrack}>\n          <img src={stepBackwards} alt=\"Previous\" />\n      </button>\n      <button\n        onClick={this.togglePlayPause}>\n        {this.state.playing ?\n          <img src={pause} alt=\"Pause\" /> :\n          <img src={play} alt=\"Play\" />}\n      </button>\n      <button\n        disabled={nextDisabled}\n        onClick={this.nextTrack}>\n          <img src={stepForwards} alt=\"Next\" />\n      </button>\n    </div>\n  }\n\n  renderCurrentlyPlaying() {\n    const trackCount = this.state.tracks.length\n    // data hasn't loaded, or the index got out of bounds somehow\n    if (trackCount < 1 || this.state.currentIndex >= trackCount) {\n      return null;\n    }\n\n    const currentTrack = this.state.tracks[this.state.currentIndex];\n    const { imageUrl, mediaUrl, title} = currentTrack;\n\n    let media, image;\n    if(mediaUrl.startsWith(\"https://audio-ssl.itunes.apple.com/\")) {\n      // audio\n      media = <audio id=\"media-player\">\n        <source src={mediaUrl} />\n        Your browser does not support the audio element.\n      </audio>\n      image = <img className=\"album-artwork\" src={imageUrl} alt={title} />\n    } else {\n      // video\n      media = <video id=\"media-player\">\n        <source src={mediaUrl} />\n        Your browser does not support the video tag.\n      </video>\n      image = null;\n    }\n\n    const splitTitle = title.split(\" by \");\n    return <div className=\"player\">\n      {media}\n      {image}\n      <label className=\"song-title\">{splitTitle[0]}</label>\n      <label className=\"song-artist\">{splitTitle[1]}</label>\n      {this.renderControls()}\n    </div>;\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"main\">\n          {this.renderCurrentlyPlaying()}\n          {this.renderTrackList()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}